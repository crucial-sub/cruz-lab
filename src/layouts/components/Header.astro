---
import GithubWhite from '@/assets/img/github-mark-white.svg';
import GithubBlack from '@/assets/img/github-mark.svg';
import ThemeToggle from '@/components/islands/ThemeToggle.tsx';
import { Image } from 'astro:assets';

const menu = [
  { link: '/', label: 'Home' },
  { link: '/blog/', label: 'Blog' },
  { link: '/projects/', label: 'Projects' },
  { link: '/about/', label: 'About' },
];

const { pathname } = Astro.url;
const isActive = (href: string) => pathname === href || (href !== '/' && pathname.startsWith(href));
---

<header class="border-border bg-bg-app">
  <div class="container">
    <nav class="flex items-center justify-between gap-4 py-3">
      <h2 class="m-0">
        <a href="/" class="flex items-center gap-4 text-xl font-black uppercase">
          <a href="/" class="font-bold">Cruz</a>
        </a>
      </h2>
      <div class="flex items-center gap-1">
        <a class="p-3 dark:hidden" href="https://github.com/crucial-sub" target="_blank"
          ><Image src={GithubBlack} width={24} height={24} alt="Github logo" /></a
        >
        <a class="hidden p-3 dark:block" href="https://github.com/crucial-sub" target="_blank"
          ><Image src={GithubWhite} width={24} height={24} alt="Github logo" /></a
        >
        <ThemeToggle client:load />
      </div>
    </nav>
  </div>
</header>
<div class="fixed left-1/2 top-3 z-[999] w-auto max-w-full -translate-x-1/2 px-3">
  <div
    class="relative flex rounded-full border border-border bg-[rgb(var(--bg-surface-rgb)/0.9)] px-2.5 leading-tight backdrop-blur-md [--tab-py:12px]"
  >
    {
      menu.map((item) => (
        <div class="px-2.5 text-sm">
          <a
            href={item.link}
            data-active={isActive(item.link) ? 'true' : 'false'}
            class="relative flex items-center gap-2 py-[var(--tab-py)] text-text-secondary transition hover:text-text-primary data-[active=true]:text-brand data-[active=true]:shadow-[inset_0_-1px_0_0_currentColor]"
          >
            {item.label === 'Home' ? (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.7"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
                <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
              </svg>
            ) : (
              <span>{item.label}</span>
            )}
          </a>
        </div>
      ))
    }
  </div>
</div>
